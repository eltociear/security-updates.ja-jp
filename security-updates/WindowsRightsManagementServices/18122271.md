---
TOCTitle: 規模に関する要件の評価
Title: 規模に関する要件の評価
ms:assetid: '89f0138c-946d-47d7-a286-041d4d9606a8'
ms:contentKeyID: 18122271
ms:mtpsurl: 'https://technet.microsoft.com/ja-jp/library/Cc747663(v=WS.10)'
---

規模に関する要件の評価
======================

1 台のサーバーを展開するか複数のサーバーを展開するかは、展開した RMS を使用するユーザー数と保護するファイル数によって決定します。

この条件によって、平均的な使用要件が決まります。次に、"ピーク使用" 要件について計画します。これは多くの場合、平均要件の 3 倍程度になります。

また、会社のフォールト トレランスおよびサービス可用性の基準についても考慮します。

ベンチマーク測定値を確定するために、RMS は 1 GB の RAM を備えた 2.4 GHz Pentium 4 デュアル プロセッサ サーバーを使用してテストされています。この構成で、RMS サーバーは毎秒約 50 ライセンスを配布しました。

容量計画時には、次の数字を使用して RMS システムの使用要件を評価できます。

###  

 
<table style="border:1px solid black;">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th style="border:1px solid black;" >トランザクション</th>
<th style="border:1px solid black;" >頻度</th>
<th style="border:1px solid black;" >クライアントからサーバーへの使用帯域幅 (KB)</th>
<th style="border:1px solid black;" >サーバーからクライアントへの使用帯域幅 (KB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="border:1px solid black;">ライセンス要求</td>
<td style="border:1px solid black;">すべてのユーザー、すべてのコンテンツについて繰り返される</td>
<td style="border:1px solid black;">64</td>
<td style="border:1px solid black;">18</td>
</tr>
<tr class="even">
<td style="border:1px solid black;">RM アカウント証明</td>
<td style="border:1px solid black;">RMS 初期化トラフィックのみ</td>
<td style="border:1px solid black;">12</td>
<td style="border:1px solid black;">16</td>
</tr>
<tr class="odd">
<td style="border:1px solid black;">クライアント登録</td>
<td style="border:1px solid black;">RMS 初期化トラフィックのみ</td>
<td style="border:1px solid black;">17</td>
<td style="border:1px solid black;">16</td>
</tr>
</tbody>
</table>
  
上記に加えて、Active Directory クエリ トラフィックがネットワークのスループットに影響を与える場合もあります。ただし、グローバル カタログ サーバーのごく近くで RMS サーバーを展開する場合には、これは一般に問題になりません。例外は、1 つのサイトですべてのグローバル カタログ サーバーに障害が起き、同じ転送量をサポートしていない接続の、別のサイトの障害を引き起こす場合です。
  
RMS トランザクションの使用帯域幅に関する基準データを次の表に示します。この表を使用して、組織のネットワークに対する Active Directory クエリ トラフィックの影響を評価できます。
  
###  

 
<table style="border:1px solid black;">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th style="border:1px solid black;" >トランザクション</th>
<th style="border:1px solid black;" >RMS からグローバル カタログへの使用帯域幅 (バイト)</th>
<th style="border:1px solid black;" >グローバル カタログから RMS への使用帯域幅 (バイト)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="border:1px solid black;">RMS 接続の確立 (ldap_bind)</td>
<td style="border:1px solid black;">1600</td>
<td style="border:1px solid black;">200</td>
</tr>
<tr class="even">
<td style="border:1px solid black;">RMS グループ メンバシップの確立 (ldap_search)</td>
<td style="border:1px solid black;">200</td>
<td style="border:1px solid black;">100</td>
</tr>
</tbody>
</table>
  
上の表を参照して、展開内容に応じた数値を適用してください。たとえば、ユーザーが 15 のグループに属している場合は、RMS からの検索要求に 200 バイトが必要であり、グローバル カタログからの応答には 1500 バイト (100 バイト x 15) が必要です。
  
転送量の計画は、予測されるコンテンツ ライセンス要求の負荷に基づく必要があります。コンテンツ ライセンス要求の負荷は RMS が実行する操作の大部分を占めているからです。ライセンス要求はデータ集中型ではなく、キャッシュされている情報に完全に依存することが可能なため、ディスク ドライブの入出力速度やスループットは RMS にとって重要な要素ではありません。
  
CPU 使用率はサーバーのスループットを決定する上で最も重要な要素であるため、適切なプロセッサを選択することが重要です。サーバーにかかる負荷が増えてサーバーの最大スループットを超えると、RMS サーバーのメモリ要件が増加します。この状況になると、インターネット インフォメーション サービス (以下 IIS) はサーバーが処理可能になるまで、受信した要求をメモリ内のキューに入れます。IIS に設定したキュー制限に基づいて、キューが指定された最大長に達すると、受信した要求はキューに入れられずに拒否されます。
  
負荷パターンに対する RMS のメモリ要件 (作業セット) は、物理的なメモリ サイズの制限内に完全に収まる必要があります。合計メモリ サイズに最も影響を与えるのは、グループ拡張におけるキャッシュのニーズです。RMS が動作する各サーバーに対して、最低 1 GB の RAM を推奨します。
  
各 RMS サーバーは、決まった時間内に決まった数のクライアント要求を処理できます (毎秒約 30 ～ 50 ライセンス)。そのため、サーバーを線形に追加することで、クラスタ全体のライセンス発行容量が増加し、信頼性も向上します。つまり、規模の拡大は個別のサーバーに対してだけでなく、展開する複数のサーバーにとっても適切に行う必要があります。次の構成例では、これらの予測値を使用して RMS 展開の規模に関する要件を計算する方法を示しています。
  
-   小規模構成  
    いつかの組織では、RMS がサポートする使用量の要件がかなり小さい場合もあります。たとえば、約 5,000 人のユーザーを抱える組織で、定期的に RMS を使って電子メール コンテンツを保護しているユーザーがそのうちの 10% であり、平均的なユーザーは 1 時間あたり 3 件の電子メール メッセージを保護しているとします。このような要件では、RMS サーバーは 1 時間あたり 1,500 ライセンス、つまり毎秒 0.42 ライセンスを配布する必要があります。これは平均的な使用要件です。この数字に 3 を掛けると、毎秒 1.25 ライセンスというピーク使用要件が求められます。  
    この計算に基づくと、使用量はかなり小さくなります。そのため、この組織では 1 台の RMS サーバーで十分です。  
-   中規模構成  
    多くの組織では、中程度の使用要件を持つかなり大きなユーザー グループが存在します。たとえば、約 40,000 人のユーザーを抱える組織で、定期的に RMS を使ってコンテンツを保護しているユーザーがそのうちの 50% であり、平均的なユーザーは 1 時間あたり 7 件の電子メール メッセージと 1 つのドキュメントまたは他のファイルを保護しているとします。このような要件では、RMS サーバーは 1 時間あたり 160,000 ライセンス、つまり毎秒 44.4 ライセンスを配布する必要があります。これは平均的な使用要件です。 この数字に 3 を掛けると、毎秒 133.3 ライセンスというピーク使用要件が求められます。  
    この計算に基づくと、使用量は中程度であり、現在のユーザーのニーズを満たすには 3 台の RMS サーバーで十分です。 6 台の RMS サーバーがあれば、現在のユーザーのニーズを満たしながら、成長の余地も得られます。  
-   大規模構成  
    より大規模な組織では、多くの場合、大きな使用要件を持つきわめて大きなユーザー グループが存在します。たとえば、約 150,000 人のユーザーを抱える組織で、定期的に RMS を使ってコンテンツを保護しているユーザーがそのうちの 70% であり、平均的なユーザーは 1 時間あたり 15 件の電子メール メッセージと 3 つのドキュメントまたは他のファイルを保護しているとします。このような要件では、RMS サーバーは 1 時間あたり 1,890,000 ライセンス、つまり毎秒 525 ライセンスを配布する必要があります。これは平均的な使用要件です。この数字に 3 を掛けると、毎秒 1575 ライセンスというピーク使用要件が求められます。  
    この計算に基づくと、使用量は非常に大きく、現在のユーザーのニーズを満たすには 32 台の RMS サーバーが必要です。51 台の RMS サーバーがあれば、現在のユーザーのニーズを満たしながら、成長の余地も得られます。
  
計算結果で毎秒 30 ～ 50 のライセンスが必要になるごとに、一般に RMS サーバーがもう 1 台必要になります。
